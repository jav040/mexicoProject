{"ast":null,"code":"import { apiCall } from \"./api.js\";\nimport { SET_CURRENT_USER } from \"./actionTypes.js\";\nexport function setCurrentUser(user) {\n  return {\n    type: SET_CURRENT_USER,\n    user\n  };\n}\nexport function authUser(type, userData) {\n  return dispatch => {\n    // wrap our thunk in a promise so we can wait for the API call\n    return new Promise((resolve, reject) => {\n      return apiCall(\"post\", `/api/auth/${type}`, userData).then(_ref => {\n        let {\n          token,\n          ...user\n        } = _ref;\n        localStorage.setItem(\"jwtToken\", token);\n        dispatch(setCurrentUser(user));\n        resolve(); // indicate that the API call succeeded\n      }).catch(err => {\n        reject(); // indicate the API call failed\n      });\n    });\n  };\n}","map":{"version":3,"names":["apiCall","SET_CURRENT_USER","setCurrentUser","user","type","authUser","userData","dispatch","Promise","resolve","reject","then","token","localStorage","setItem","catch","err"],"sources":["C:/Users/Jorge Vasquez/Projects/timcorey/mexicoguide/mexicoguide_client/src/auth.js"],"sourcesContent":["import { apiCall } from \"./api.js\";\r\nimport { SET_CURRENT_USER } from \"./actionTypes.js\";\r\n\r\nexport function setCurrentUser(user) {\r\n  return {\r\n    type: SET_CURRENT_USER,\r\n    user\r\n  };\r\n}\r\n\r\nexport function authUser(type, userData) {\r\n  return dispatch => {\r\n    // wrap our thunk in a promise so we can wait for the API call\r\n    return new Promise((resolve, reject) => {\r\n      return apiCall(\"post\", `/api/auth/${type}`, userData)\r\n        .then(({ token, ...user }) => {\r\n          localStorage.setItem(\"jwtToken\", token);\r\n          dispatch(setCurrentUser(user));\r\n          resolve(); // indicate that the API call succeeded\r\n        })\r\n        .catch(err => {\r\n          reject(); // indicate the API call failed\r\n        });\r\n    });\r\n  };\r\n}\r\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,UAAU;AAClC,SAASC,gBAAgB,QAAQ,kBAAkB;AAEnD,OAAO,SAASC,cAAc,CAACC,IAAI,EAAE;EACnC,OAAO;IACLC,IAAI,EAAEH,gBAAgB;IACtBE;EACF,CAAC;AACH;AAEA,OAAO,SAASE,QAAQ,CAACD,IAAI,EAAEE,QAAQ,EAAE;EACvC,OAAOC,QAAQ,IAAI;IACjB;IACA,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,OAAOV,OAAO,CAAC,MAAM,EAAG,aAAYI,IAAK,EAAC,EAAEE,QAAQ,CAAC,CAClDK,IAAI,CAAC,QAAwB;QAAA,IAAvB;UAAEC,KAAK;UAAE,GAAGT;QAAK,CAAC;QACvBU,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,KAAK,CAAC;QACvCL,QAAQ,CAACL,cAAc,CAACC,IAAI,CAAC,CAAC;QAC9BM,OAAO,EAAE,CAAC,CAAC;MACb,CAAC,CAAC,CACDM,KAAK,CAACC,GAAG,IAAI;QACZN,MAAM,EAAE,CAAC,CAAC;MACZ,CAAC,CAAC;IACN,CAAC,CAAC;EACJ,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}